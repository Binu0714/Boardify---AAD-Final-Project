package org.example.bordifybackend.service;

import lombok.RequiredArgsConstructor;
import org.example.bordifybackend.Dto.StatsDTO;
import org.example.bordifybackend.repo.BookingRepo;
import org.example.bordifybackend.repo.PropertyRepo;
import org.example.bordifybackend.repo.UserRepo;
import org.springframework.stereotype.Service;

@Service
@RequiredArgsConstructor
public class AdminService {
    private final UserRepo userRepo;
    private final PropertyRepo propertyRepo;
    private final BookingRepo bookingRepo;

    public StatsDTO getDashboardStats() {
        long totalUsers = userRepo.count();
        long totalListings = propertyRepo.count();
        long availableListings = propertyRepo.countByIsAvailableTrue();
        long bookedListings = bookingRepo.countByStatus("BOOKED");

        return new StatsDTO(totalUsers, totalListings, availableListings, bookedListings);
    }
}
